---
title: "数仓概念"
slug: basic-concepts
description: "本文主要介绍数仓的4个特点，数据湖、数据中台相关的定义与区别，最后介绍数据模型。"
date: "2023-09-01"
image: "post_imgs/1.jpg"
isCJKLanguage: true
math: false
toc: true
hidden: false
comments: true
draft: false
lastmod: 
categories:
    - 数仓理论
tags:
    - 学习思考
    - 概念理解
---

## 数仓特点

### 面向主题

建立数仓之前，必须先明确主题域。比如我要分析某段时间某个产品的用户特征，我去销售域的仓库里找数据就可以。

### 集成性

这里有2点，第2点是我一直忽视的。  

1. 从各个系统里拿数据放到一起。
2. 把数据处理成码值统一、单位统一的符合标准的数据。

### 相对稳定

存储稳定，很少修改和删除，一般都是重跑。

### 反应历史变化

根据数据的价值、重跑成本，不同的表有不同的存储策略和生命周期
数据存的比较久，京东淘宝几年前的订单都有。

## 为什么需要数据仓库？

- 需要分析的数据量较大(单批 GiB)，此时事务性数据库分析性能堪忧

- 需要通过建立索引而且会分析查询会影响在线事务。而数仓一般采用列式存储，自带索引性能加成。 

- 分析查询不想影响在线事务 

- 需要记录历史数据    

- 需要对来自不同数据库、数据源的数据进行整合、关联分析和交叉探查。比如将存储在 SLS 的用户日志和 MySQL 的用户信息进行关联分析，通过用户的行为日志建立用户画像。

- 批处理分析，需要定期批量查询分析数据并生成结果，比如各种 BI 报表。

### 数据库与数据仓库数据模型的区别

![数据仓库与数据库的区别](/diff-bt-dw-db.png)

### 数据仓库和数据中台的什么区别

数据仓库的主要场景是支持管理决策和业务分析，而数据中台则是将数据服务化之后提供给业务系统，目标是将数据能力渗透到各个业务环节，不限于决策分析类场景。 

### 数据湖

#### 数据湖是如何出现，应对场景是什么

出现了各种不同类型的数据，如音频，视频等非结构化的数据。人们意识到数据包含巨大的潜在价值，对于很多数据，即使暂时没有明确的需求，也想先留一份。 所以，妥协的办法出现了，从先处理后用，变成了先存储，以后用的时候再考虑怎么处理。这就是数据湖的处理方式。 

#### 数据仓库和数据湖的差异

![数据仓库和数据湖的差异](/diff-bt-dw-dl.png)


湖仓一体，目前作为前沿的大数据架构，数据湖和数据仓库一体正蓬勃发展，有望成为新一代的大数据应用架构。

## 数据模型

数据模型：表现和抽象实体和实体间的关系
数据模型=数据组件（业务对象（如用户、商家）、指标、表等）+组件间关系+组件间规约

金字塔模型，尖是概念模型，底是物理模型    

1. 概念模型：确认要分析的业务过程    
2. 逻辑模型：确认粒度、维度    
3. 物理模型：真正要落表了    

### 为什么要建设数据模型

1. 能全面了解该单位的业务架构图和整个业务的运行情况；改进业务流程。    

2. 消灭信息孤岛和数据差异。    

3. 上层业务变化不必牵一发而动全身。

> 建模过程中的何种手段可以有这样的好处？后面学建模的时候得思考。目前的理解是可以把变化的业务搞成确认的粒度、维度，数仓分层。解决业务的变动和数据仓库的灵活性。通过数据模型的建设，能够很好的分离出底层技术的实现和上层业务的展现。当上层业务发生变化时，通过数据模型，底层的技术实现可以非常轻松的完成业务的变动，从而达到整个数据仓库系统的灵活性。

4. 是建设数仓的前期阶段，帮助数仓本身的建设。    


### 建模简化过程

1. 概念和逻辑阶段：选择业务过程，声明粒度，确认维度，定义维度属性，确认事实，确认冗余。参考业务系统开发的业务流程，看看概念和逻辑模型最后能不能输出核心的业务流程图。   

2. 物理模型阶段：实体一般建维度表（如用户、商品等），业务过程一般用事实表

